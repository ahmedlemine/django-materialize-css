{% load static %}
{% load humanize %}

<div id="post-list">
  <div class="row">
      {% if post_list %}
        {% for post in post_list %}
        <div class="col s12 m6 l4">
        <!------------------- Post card -------------------->
        <div class="card medium">
          <div class="card-image waves-effect waves-block waves-light">
            <img class="activator responsive-img" src="{{ post.image.url }}">
          </div>
          <div class="card-content">
            <span class="card-title activator grey-text text-darken-4">{{ post.title }}<i class="material-icons right">more_vert</i></span>
            <p><a href="{% url 'detail' post.slug %}">Read</a></p>
          </div>
          <div class="card-action">
            <span>
              <a href="#post-edit-modal" class="modal-trigger grey-text"
                    hx-get="{% url 'htmx-update' post.slug %}"
                    hx-target="#post-update-form"
                    hx-swap="outerHTML">
                    <i class="material-icons">mode_edit</i>
                </a>
                <a class="grey-text"
                    hx-delete="{% url 'htmx-delete' post.slug %}"
                    hx-target="#post-list"
                    hx-swap="outerHtml"
                    hx-confirm="Are you sure you wish to delete this post: {{post.title}}?"
                    htmx:afterRequest="M.toast({html: 'I am a toast'})">
                    <i class="material-icons">delete</i>
                </a>
                <a href="#post-edit-modal" class="modal-trigger grey-text">
                    <i class="material-icons">favorite_border</i>
                </a>
                <a href="#post-edit-modal" class="modal-trigger grey-text">
                  <i class="material-icons">sms</i>
              </a>
            </span>
          </div>
          <div class="card-reveal">
            <span class="card-title grey-text text-darken-4 truncate">{{ post.title }}<i class="material-icons right">close</i></span>
            <p class="truncate">{{ post.body }}...</p>
          </div>
        </div>
        <!------------------- End Post card -------------------->
      </div>

    {% endfor %}
</div>
{% else %}

  <div style="margin-bottom: 50px; margin-top: 50px; padding: 40px 0px; border: 4px #9e9e9e solid; border-style: dashed;" 
        class="nopost-wrapper container center">
    <h5 style="padding: 10px; margin-top: 0px;" class="grey-text">No posts yet.</h5>
        <a href="{% url 'create' %}" class="btn waves-effect grey">
            <i class="material-icons white-text left">add_circle</i>
            <span class="bold">Add a post</span>
        </a>
</div>
  {% endif %}
</div>