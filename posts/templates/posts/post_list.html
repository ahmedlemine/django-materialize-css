{% extends 'posts/base.html' %}
{% load humanize %}

{% block content %}

<H1 class="teal-text lighten-4"">Latest Posts</H1>
  {% if post_list %}
    {% for post in post_list %}
        <div id="entry{{post.pk}}">
        <h3 class=""><a href="{% url 'detail' post.slug %}">{{ post.title }}</a></h3>
        <span>{{ post.added|timesince }} ago | </span>
        <span>{{ views|intcomma }} views</span>
        <hr/>
        <br><br>
        <div>
        <form action="{% url 'htmx-delete' post.slug %}">
            {% csrf_token %}
            <button class="btn red"
            hx-delete="{% url 'htmx-delete' post.slug %}"
            hx-target="#entry{{post.pk}}"
            hx-swap="innerHTML"
            hx-confirm="Are you sure you wish to delete this post: {{post.title}}?">
              Delete with htmx
              </button>
        </form>
        <br>
        </div>
      </div>
        <hr/>
    {% endfor %}
  {% else %}
  <div style="margin-bottom: 50px; margin-top: 50px; padding: 80px 0px; border: 6px #9e9e9e solid; border-style: dashed;" class="nobook-wrapper container center">
    <h3 style="padding: 10px; margin-top: 50px;" class="grey-text">No posts yet.</h3>

        <a href="{% url 'create' %}" class="btn btn-large grey">
            <i class="material-icons white-text left">add_circle</i>
            <span class="bold">Add a post</span>
        </a>

</div>
  {% endif %}
{% endblock content %}